openapi: 3.0.0
info:
  title: "Fireblocks Provider Ramps API"
  version: 0.0.1

  contact:
    name: Fireblocks
    url: https://fireblocks.com

tags:
  - name: capabilities
    description: Server capabilities discovery operations.
  - name: ramps
    description: |-
      Beta Feature â€“ Limited Access.

      On-ramp, off-ramp and bridging operations.

x-path-params:
  EntityIdPathParam:
    { $ref: "./fb-provider-api.yaml#/components/parameters/EntityIdPathParam" }
  SubAccountIdPathParam:
    {
      $ref: "./fb-provider-api.yaml#/components/parameters/SubAccountIdPathParam",
    }

x-query-params:
  PaginationLimit:
    { $ref: "./fb-provider-api.yaml#/components/parameters/PaginationLimit" }
  PaginationStartingAfter:
    {
      $ref: "./fb-provider-api.yaml#/components/parameters/PaginationStartingAfter",
    }
  PaginationEndingBefore:
    {
      $ref: "./fb-provider-api.yaml#/components/parameters/PaginationEndingBefore",
    }
  ListOrderQueryParam:
    {
      $ref: "./fb-provider-api.yaml#/components/parameters/ListOrderQueryParam",
    }

x-header-params:
  X-FBAPI-KEY:
    { $ref: "./fb-provider-api.yaml#/components/parameters/X-FBAPI-KEY" }
  X-FBAPI-SIGNATURE:
    { $ref: "./fb-provider-api.yaml#/components/parameters/X-FBAPI-SIGNATURE" }
  X-FBAPI-NONCE:
    { $ref: "./fb-provider-api.yaml#/components/parameters/X-FBAPI-NONCE" }
  X-FBAPI-TIMESTAMP:
    { $ref: "./fb-provider-api.yaml#/components/parameters/X-FBAPI-TIMESTAMP" }

x-schemas:
  PositiveAmount:
    { $ref: "./fb-provider-api.yaml#/components/schemas/PositiveAmount" }
  PublicBlockchainCapability:
    {
      $ref: "./fb-provider-api.yaml#/components/schemas/PublicBlockchainCapability",
    }
  PublicBlockchainAddress:
    {
      $ref: "./fb-provider-api.yaml#/components/schemas/PublicBlockchainAddress",
    }
  FiatCapability:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/FiatCapability",
    }
  NationalCurrency:
    { $ref: "./fb-provider-api.yaml#/components/schemas/NationalCurrency" }
  CryptocurrencyReference:
    {
      $ref: "./fb-provider-api.yaml#/components/schemas/CryptocurrencyReference",
    }
  AssetReference:
    { $ref: "./fb-provider-api.yaml#/components/schemas/AssetReference" }
  FiatAddress:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/FiatAddress" }
  IbanTransfer:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/IbanTransfer" }
  AchTransfer:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/AchTransfer" }
  WireTransfer:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/WireTransfer" }
  SpeiTransfer:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/SpeiTransfer" }
  PixTransfer:
    { $ref: "./fb-provider-transfer-api.yaml#/components/schemas/PixTransfer" }
  EuropeanSEPATransfer:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/EuropeanSEPATransfer",
    }
  MobileMoneyTransfer:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/MobileMoneyTransfer",
    }
  LocalBankTransfer:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/LocalBankTransfer",
    }
  PublicBlockchainTransaction:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/PublicBlockchainTransaction",
    }
  ParticipantsIdentification:
    {
      $ref: "./fb-provider-transfer-api.yaml#/components/schemas/ParticipantsIdentification",
    }

x-responses:
  BadRequestResponse:
    { $ref: "./fb-provider-api.yaml#/components/responses/BadRequestResponse" }
  UnauthorizedResponse:
    {
      $ref: "./fb-provider-api.yaml#/components/responses/UnauthorizedResponse",
    }
  ErrorResponse:
    { $ref: "./fb-provider-api.yaml#/components/responses/ErrorResponse" }

paths:
  /accounts/{accountId}/capabilities/ramps:
    get:
      operationId: getRampMethods
      summary: Get list of supported ramp methods
      description: >
        Retrieves the list of supported on-ramp and off-ramp methods available for the specified account.
        Shows which payment methods and currencies are supported for fiat-to-crypto and crypto-to-fiat conversions.
      tags: [capabilities]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-query-params/PaginationLimit"
        - $ref: "#/x-query-params/PaginationStartingAfter"
        - $ref: "#/x-query-params/PaginationEndingBefore"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
      responses:
        "200":
          $ref: "#/components/responses/RampMethodsResponse"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"

  /accounts/{accountId}/ramps:
    get:
      operationId: getRamps
      summary: Get list of ramps sorted by creation time
      description: >
        Retrieves a paginated list of all ramp transactions for the specified account.
        Ramps are sorted by creation time and include both on-ramp and off-ramp operations.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-query-params/PaginationLimit"
        - $ref: "#/x-query-params/PaginationStartingAfter"
        - $ref: "#/x-query-params/PaginationEndingBefore"
        - $ref: "#/x-query-params/ListOrderQueryParam"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
      responses:
        "200":
          $ref: "#/components/responses/GetRampsResponse"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"
    post:
      operationId: createRamp
      summary: Initiates a new ramp
      description:
        Creates the payment instructions for the new ramp and return it in
        the response.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
      requestBody:
        description: Ramp details
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RampRequest"
      responses:
        "201":
          $ref: "#/components/responses/CreateRampResponse"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"

  /accounts/{accountId}/ramps/requirements/{quoteId}:
    get:
      operationId: getRampCreationRequirements
      summary: Get requirements for creating a new ramp
      description: >
        Retrieves the requirements for creating a new ramp, including any necessary
        certificates (public keys) for encrypting PII data.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
        - $ref: "#/components/parameters/QuoteIdPathParam"
      responses:
        "200":
          description: Ramp creation requirements.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RampRequirements"
              examples:
                default:
                  value:
                    piiEncryption:
                      certificate: "-----BEGIN CERTIFICATE-----\nMIIDXTCCAkSgAwIBAgIJAJ...\n-----END CERTIFICATE-----"
                      keyId: "key-v1-2026"
                      requiredPIIFields:
                        - "originator.fullName"
                        - "originator.dateOfBirth"
                        - "beneficiary.fullName"
                        - "beneficiary.accountNumber"
                      supportedJWEAlgorithms:
                        - "RSA-OAEP-256"
                      supportedJWEEncryptions:
                        - "A128GCM"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"

  /accounts/{accountId}/ramps/{id}:
    get:
      operationId: getRampDetails
      summary: Get details of a specific ramp
      description: >
        Retrieves detailed information about a specific ramp transaction, including
        payment instructions, status, amounts, and processing details.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
        - $ref: "#/x-path-params/EntityIdPathParam"
      responses:
        "200":
          $ref: "#/components/responses/GetRampDetailsResponse"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"
    patch:
      operationId: submitSignedRampPaymentPermit
      summary: Submit signed transaction for a ramp
      description: >
        Submits the signed transaction string back to the provider for broadcasting.
        This is used in flows where the user is the transaction originator.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
        - $ref: "#/x-path-params/SubAccountIdPathParam"
        - $ref: "#/x-path-params/EntityIdPathParam"
      requestBody:
        description: Signed transaction details
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitSignedRampPaymentPermitRequest"
      responses:
        "200":
          $ref: "#/components/responses/GetRampDetailsResponse"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"

  /ramps/subscriptions/rfi:
    post:
      summary: Subscribe to all ramp request for information events
      description: >-
        The subscription will cause a PUT request to the specified subscription
        URL each time a ramp request for information is received.
      tags: [ramps]
      parameters:
        - $ref: "#/x-header-params/X-FBAPI-KEY"
        - $ref: "#/x-header-params/X-FBAPI-NONCE"
        - $ref: "#/x-header-params/X-FBAPI-SIGNATURE"
        - $ref: "#/x-header-params/X-FBAPI-TIMESTAMP"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Subscription"
      responses:
        "200":
          description: Successful subscription.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Subscription"
        "400":
          $ref: "#/x-responses/BadRequestResponse"
        "401":
          $ref: "#/x-responses/UnauthorizedResponse"
        "4XX":
          $ref: "#/x-responses/ErrorResponse"
        "5XX":
          $ref: "#/x-responses/ErrorResponse"
      callbacks:
        onRampRequestForInformation:
          "{$request.body#/subscriberUrl}":
            put:
              requestBody:
                description: Details of the ramp request for information.
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RampRequestForInformation"
              responses:
                "200":
                  description: Successful update.
                "4XX":
                  $ref: "#/x-responses/ErrorResponse"
                "5XX":
                  $ref: "#/x-responses/ErrorResponse"

components:
  parameters:
    QuoteIdPathParam:
      name: quoteId
      in: path
      required: true
      description: The ID of the quote for which requirements are needed.
      schema:
        type: string
  responses:
    RampMethodsResponse:
      description: List of ramp methods for account.
      content:
        application/json:
          schema:
            type: object
            required: [capabilities]
            properties:
              capabilities:
                type: array
                items:
                  $ref: "#/components/schemas/RampMethod"
          examples:
            allUsdMethods:
              summary: USDs ramps
              description: >-
                This response indicates that on ramp from USD to USDC, off 
                ramp from USDC to USD and bridging between USDC and USDC on 
                different blockchains are supported. The USD asset can be 
                specified directly while tokens must be defined in 
                `GET /capabilities/assets` and referenced using their IDs.

                The asset IDs in this example are the same IDs used in the 
                examples of `GET /capabilities/assets`.
              value:
                capabilities:
                  - id: "16b8b2c3-bd61-4745-9c48-3d30c2bc6907"
                    from:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                    to:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                  - id: "69fa4f38-c1fd-4215-a310-82272225c4ef"
                    from:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    to:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                  - id: "afc7caa0-5b7e-4c98-8f2a-a037d0c6bbea"
                    from:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    to:
                      asset:
                        assetId: "606bce6b-ff15-4704-9390-b9e32a6cfcff" # USDC on Polygon
                      transferMethod: "PublicBlockchain"

    CreateRampResponse:
      description: New ramp has been successfully created.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Ramp"
          examples:
            onRamp:
              summary: OnRamp
              description: A standard fiat to crypto on-ramp without additional features.
              value:
                id: "16b8b2c3-bd61-4745-9c48-3d30c2bc6907"
                createdAt: "2021-09-01T12:00:00Z"
                updatedAt: "2021-09-01T12:00:00Z"
                status: "Pending"
                amount: "1000.00"
                type: "OnRamp"
                expiresAt: "2021-09-01T12:00:00Z"
                from:
                  asset:
                    nationalCurrencyCode: "USD"
                  transferMethod: "Iban"
                to:
                  asset:
                    assetId: "360de0ad-9ba1-45d5-8074-22453f193d65"
                  transferMethod: "PublicBlockchain"
                  address: "0x1234567890abcdef1234567890abcdef12345678"
                paymentInstructions:
                  asset:
                    nationalCurrencyCode: "USD"
                  transferMethod: "Iban"
                  accountHolder:
                    name: "John Doe"
                    address: "123 Main St, New York, NY 10001"
                  iban: "US1234567890"
                estimatedFees:
                  - feeType: "ORDER"
                    feeAsset:
                      nationalCurrencyCode: "USD"
                    fee:
                      amountType: "FIXED"
                      amount: "100.00"
            onRampWithQuote:
              summary: OnRamp with Quote
              description: An on-ramp that includes quote information for price execution.
              value:
                id: "69fa4f38-c1fd-4215-a310-82272225c4ef"
                createdAt: "2021-09-01T12:00:00Z"
                updatedAt: "2021-09-01T12:00:00Z"
                status: "Pending"
                amount: "500.00"
                type: "OnRamp"
                expiresAt: "2021-09-01T12:00:00Z"
                from:
                  asset:
                    nationalCurrencyCode: "USD"
                  transferMethod: "Iban"
                to:
                  asset:
                    assetId: "606bce6b-ff15-4704-9390-b9e32a6cfcff"
                  transferMethod: "PublicBlockchain"
                  address: "0xabcdef1234567890abcdef1234567890abcdef12"
                paymentInstructions:
                  asset:
                    nationalCurrencyCode: "USD"
                  transferMethod: "Iban"
                  accountHolder:
                    name: "Jane Smith"
                    address: "456 Oak Street, London, UK"
                  iban: "US1234567890"
                executionDetails:
                  type: "Quote"
                  quoteId: "quote-123456789"
                  reQuote:
                    type: "Retry"
                    slippage: 0.02
                    count: 3
                estimatedFees:
                  - feeType: "ORDER"
                    feeAsset:
                      nationalCurrencyCode: "USD"
                    fee:
                      amountType: "FIXED"
                      amount: "100.00"
            offRampWithSigning:
              summary: OffRamp with Signing Message
              description: An off-ramp that returns an EIP-712 message to be signed by the user.
              value:
                id: "afc7caa0-5b7e-4c98-8f2a-a037d0c6bbea"
                createdAt: "2021-09-01T12:00:00Z"
                updatedAt: "2021-09-01T12:00:00Z"
                status: "Pending"
                amount: "1000.00"
                type: "OffRamp"
                expiresAt: "2021-09-01T12:00:00Z"
                from:
                  asset:
                    assetId: "360de0ad-9ba1-45d5-8074-22453f193d65"
                  transferMethod: "PublicBlockchain"
                  address: "0x1234567890abcdef1234567890abcdef12345678"
                to:
                  asset:
                    nationalCurrencyCode: "USD"
                  transferMethod: "Iban"
                  accountHolder:
                    name: "John Doe"
                paymentInstructions:
                  type: "EVM_EIP712"
                  message:
                    types:
                      EIP712Domain:
                        - name: name
                          type: string
                        - name: version
                          type: string
                        - name: chainId
                          type: uint256
                        - name: verifyingContract
                          type: address
                      Permit:
                        - name: owner
                          type: address
                        - name: spender
                          type: address
                        - name: value
                          type: uint256
                        - name: nonce
                          type: uint256
                        - name: deadline
                          type: uint256
                    primaryType: "Permit"
                    domain:
                      name: "USD Coin"
                      version: "2"
                      chainId: 1
                      verifyingContract: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
                    message:
                      owner: "0x1234567890abcdef1234567890abcdef12345678"
                      spender: "0xabcdef1234567890abcdef1234567890abcdef12"
                      value: "1000000"
                      nonce: 0
                      deadline: 1736035200
                estimatedFees:
                  - feeType: "ORDER"
                    feeAsset:
                      nationalCurrencyCode: "USD"
                    fee:
                      amountType: "FIXED"
                      amount: "10.00"

    GetRampDetailsResponse:
      description: Ramp details.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Ramp"

    GetRampsResponse:
      description: List of ramps for account.
      content:
        application/json:
          schema:
            type: object
            required: [ramps]
            properties:
              ramps:
                type: array
                items:
                  $ref: "#/components/schemas/Ramp"
          examples:
            allRamps:
              summary: All ramps
              description: >-
                This response indicates that there are 3 ramps in the account.
              value:
                ramps:
                  - id: "16b8b2c3-bd61-4745-9c48-3d30c2bc6907"
                    createdAt: "2021-09-01T12:00:00Z"
                    updatedAt: "2021-09-01T12:00:00Z"
                    status: "Pending"
                    amount: "1231.45"
                    type: "OnRamp"
                    from:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                    to:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65"
                      transferMethod: "PublicBlockchain"
                      address: "0x1234567890abcdef1234567890abcdef12345678"
                      tag: "1234567890abcdef"
                    paymentInstructions:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                      accountHolder:
                        name: "John Doe"
                        address: "123 Main St, New York, NY 10001"
                      iban: "US1234567890"
                    estimatedFees:
                      - feeType: "ORDER"
                        feeAsset:
                          nationalCurrencyCode: "USD"
                        fee:
                          amountType: "FIXED"
                          amount: "100.00"
                    expiresAt: "2021-09-01T12:00:00Z"
                  - id: "69fa4f38-c1fd-4215-a310-82272225c4ef"
                    createdAt: "2021-09-01T12:00:00Z"
                    updatedAt: "2021-09-01T12:00:00Z"
                    status: "Completed"
                    amount: "1231.45"
                    type: "OffRamp"
                    from:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    to:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                      accountHolder:
                        name: "John Doe"
                        address: "123 Main St, New York, NY 10001"
                      iban: "US1234567890"
                    paymentInstructions:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                      address: "0x1234567890abcdef1234567890abcdef12345678"
                    payment:
                      blockchainTxId: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      amount: "1231.45"
                      address: "0x1234567890abcdef1234567890abcdef12345678"
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    receipt:
                      asset:
                        nationalCurrencyCode: "USD"
                      transferMethod: "Iban"
                      accountHolder:
                        name: "John Doe"
                        address: "123 Main St, New York, NY 10001"
                      iban: "US1234567890"
                      amount: "1231.45"
                      actualFees:
                        - feeType: "ORDER"
                          feeAsset:
                            nationalCurrencyCode: "USD"
                          fee:
                            amountType: "FIXED"
                            amount: "100.00"
                    expiresAt: "2021-09-01T12:00:00Z"
                  - id: "afc7caa0-5b7e-4c98-8f2a-a037d0c6bbea"
                    createdAt: "2021-09-01T12:00:00Z"
                    updatedAt: "2021-09-01T12:00:00Z"
                    status: "Processing"
                    amount: "1231.45"
                    type: "Bridge"
                    from:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    to:
                      asset:
                        assetId: "606bce6b-ff15-4704-9390-b9e32a6cfcff"
                      transferMethod: "PublicBlockchain"
                      address: "0x1234567890abcdef1234567890abcdef12345678"
                      tag: "1234567890abcdef"
                    paymentInstructions:
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                      address: "0x1234567890abcdef1234567890abcdef12355678"
                    payment:
                      blockchainTxId: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      amount: "1231.45"
                      address: "0x1234567890abcdef1234567890abcdef12355678"
                      asset:
                        assetId: "360de0ad-9ba1-45d5-8074-22453f193d65" # USDC on Ethereum
                      transferMethod: "PublicBlockchain"
                    receipt:
                      actualFees:
                        - feeType: "ORDER"
                          feeAsset:
                            nationalCurrencyCode: "USD"
                          fee:
                            amountType: "FIXED"
                            amount: "100.00"
                      blockchainTxId: "0x1234567890abcdef1234567899abcdef1234567890abcdef1234567890abcdef"
                      amount: "1231.45"
                      address: "0x1234567890abcdef1234567890abcdef12345678"
                      asset:
                        assetId: "606bce6b-ff15-4704-9390-b9e32a6cfcff" # USDC on Polygon
                      transferMethod: "PublicBlockchain"
                    estimatedFees:
                      - feeType: "ORDER"
                        feeAsset:
                          nationalCurrencyCode: "USD"
                        fee:
                          amountType: "FIXED"
                          amount: "100.00"
                    expiresAt: "2021-09-01T12:00:00Z"
  schemas:
    RampStatus:
      enum:
        - Pending
        - Processing
        - Canceled
        - Completed
        - Failed
        - Refunded

    PrefundedOnRampCapability:
      type: object
      title: Prefunded Fiat to Crypto
      required: [from, to]
      properties:
        from:
          $ref: "#/components/schemas/PrefundedFiatCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainCapability"

    OnRampCapability:
      type: object
      title: Fiat to Crypto
      required: [from, to]
      properties:
        from:
          $ref: "#/x-schemas/FiatCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainCapability"

    PrefundedOffRampCapability:
      type: object
      title: Prefunded Crypto to Fiat
      required: [from, to]
      properties:
        from:
          $ref: "#/components/schemas/PrefundedBlockchainCapability"
        to:
          $ref: "#/x-schemas/FiatCapability"

    OffRampCapability:
      type: object
      title: Crypto to Fiat
      required: [from, to]
      properties:
        from:
          $ref: "#/x-schemas/PublicBlockchainCapability"
        to:
          $ref: "#/x-schemas/FiatCapability"

    PrefundedBridgeCapability:
      type: object
      title: Prefunded Crypto to Crypto
      required: [from, to]
      properties:
        from:
          $ref: "#/components/schemas/PrefundedBlockchainCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainCapability"

    BridgeCapability:
      type: object
      title: Crypto to Crypto
      required: [from, to]
      properties:
        from:
          $ref: "#/x-schemas/PublicBlockchainCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainCapability"

    RampMethod:
      allOf:
        - type: object
          required: [id]
          properties:
            id:
              type: string
            hasRequirements:
              type: boolean
        - oneOf:
            - $ref: "#/components/schemas/OnRampCapability"
            - $ref: "#/components/schemas/PrefundedOnRampCapability"
            - $ref: "#/components/schemas/OffRampCapability"
            - $ref: "#/components/schemas/PrefundedOffRampCapability"
            - $ref: "#/components/schemas/BridgeCapability"
            - $ref: "#/components/schemas/PrefundedBridgeCapability"

    BlockchainCapabilityWithOptionalAddress:
      title: Blockchain Capability With Address
      allOf:
        - $ref: "#/x-schemas/PublicBlockchainCapability"
        - type: object
          properties:
            address:
              type: string

    PrefundedFiatCapability:
      type: object
      required:
        - asset
        - type
      properties:
        asset:
          $ref: "#/x-schemas/NationalCurrency"
        type:
          type: string
          enum:
            - Prefunded

    PrefundedBlockchainCapability:
      type: object
      required:
        - asset
        - type
      properties:
        asset:
          $ref: "#/x-schemas/CryptocurrencyReference"
        type:
          type: string
          enum:
            - Prefunded

    PrefundedOnRampProperties:
      type: object
      title: On Ramp - Prefunded
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - OnRamp
        from:
          $ref: "#/components/schemas/PrefundedFiatCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainAddress"

    OnRampProperties:
      type: object
      title: On Ramp
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - OnRamp
        from:
          $ref: "#/x-schemas/FiatCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainAddress"

    PrefundedOffRampProperties:
      type: object
      title: Off Ramp - Prefunded
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - OffRamp
        from:
          $ref: "#/components/schemas/PrefundedBlockchainCapability"
        to:
          $ref: "#/x-schemas/FiatAddress"

    OffRampProperties:
      type: object
      title: Off Ramp
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - OffRamp
        from:
          $ref: "#/components/schemas/BlockchainCapabilityWithOptionalAddress"
        to:
          $ref: "#/x-schemas/FiatAddress"

    PrefundedBridgeProperties:
      type: object
      title: Bridge - Prefunded
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - Bridge
        from:
          $ref: "#/components/schemas/PrefundedBlockchainCapability"
        to:
          $ref: "#/x-schemas/PublicBlockchainAddress"

    BridgeProperties:
      type: object
      title: Bridge
      required:
        - type
        - from
        - to
      properties:
        type:
          type: string
          enum:
            - Bridge
        from:
          $ref: "#/components/schemas/BlockchainCapabilityWithOptionalAddress"
        to:
          $ref: "#/x-schemas/PublicBlockchainAddress"

    CommonRampRequestProperties:
      type: object
      required:
        - idempotencyKey
        - amount
      properties:
        idempotencyKey:
          type: string
        amount:
          $ref: "#/x-schemas/PositiveAmount"

    RampRequest:
      allOf:
        - $ref: "#/components/schemas/CommonRampRequestProperties"
        - oneOf:
            - $ref: "#/components/schemas/OnRampProperties"
            - $ref: "#/components/schemas/PrefundedOnRampProperties"
            - $ref: "#/components/schemas/OffRampProperties"
            - $ref: "#/components/schemas/PrefundedOffRampProperties"
            - $ref: "#/components/schemas/BridgeProperties"
            - $ref: "#/components/schemas/PrefundedBridgeProperties"
        - type: object
          properties:
            executionDetails:
              oneOf:
                - $ref: "#/components/schemas/OrderQuote"
        - type: object
          properties:
            participantsIdentification:
              $ref: "#/x-schemas/ParticipantsIdentification"

    FixedFeeAmount:
      type: object
      required:
        - amountType
        - amount
      properties:
        amountType:
          type: string
          enum:
            - FIXED
        amount:
          $ref: "#/x-schemas/PositiveAmount"

    BasisPointsFeeAmount:
      type: object
      required:
        - amountType
        - amount
      properties:
        amountType:
          type: string
          enum:
            - BASIS_POINTS
        amount:
          type: number
          description: Basis points (bps) - 1 is 0.01% and 10000 is 100%

    FeeAmount:
      oneOf:
        - $ref: "#/components/schemas/FixedFeeAmount"
        - $ref: "#/components/schemas/BasisPointsFeeAmount"

    Fee:
      type: object
      required:
        - feeType
        - feeAsset
        - fee
      properties:
        feeType:
          type: string
          description: >
            Specifies the category of fee applied to the transaction.
            - ORDER - Fee charged by the platform for executing the trade.
            - NETWORK - Blockchain network fee paid to validators/miners.
            - SPREAD - Implicit cost built into the price difference between quotes.
            - REBATE - Negative fee returned to the user as a reward or incentive.
          enum:
            - ORDER
            - NETWORK
            - SPREAD
            - REBATE
        feeAsset:
          $ref: "#/x-schemas/AssetReference"
        fee:
          $ref: "#/components/schemas/FeeAmount"

    RampFees:
      type: array
      items:
        $ref: "#/components/schemas/Fee"

    CommonRamp:
      type: object
      required: [id, status, createdAt, updatedAt, amount, expiresAt]
      properties:
        id:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        status:
          $ref: "#/components/schemas/RampStatus"
        amount:
          $ref: "#/x-schemas/PositiveAmount"
        estimatedFees:
          $ref: "#/components/schemas/RampFees"
        executionDetails:
          oneOf:
            - $ref: "#/components/schemas/OrderQuote"
        expiresAt:
          description: Ramp expiration time.
          type: string
          format: date-time

    OnRampPropertiesWithPaymentInstructions:
      type: object
      title: On Ramp
      allOf:
        - type: object
          required:
            - paymentInstructions
          properties:
            paymentInstructions:
              allOf:
                - $ref: "#/x-schemas/FiatAddress"
                - type: object
                  properties:
                    referenceId:
                      type: string
        - $ref: "#/components/schemas/OnRampProperties"

    OffRampPropertiesWithPaymentInstructions:
      type: object
      title: Off Ramp
      allOf:
        - type: object
          required:
            - paymentInstructions
          properties:
            paymentInstructions:
              oneOf:
                - $ref: "#/x-schemas/PublicBlockchainAddress"
                - $ref: "#/components/schemas/SigningMessage"
        - $ref: "#/components/schemas/OffRampProperties"

    BridgePropertiesWithPaymentInstructions:
      type: object
      title: Bridge
      allOf:
        - type: object
          required:
            - paymentInstructions
          properties:
            paymentInstructions:
              $ref: "#/x-schemas/PublicBlockchainAddress"
        - $ref: "#/components/schemas/BridgeProperties"

    OnRampReceipt:
      allOf:
        - $ref: "#/x-schemas/PublicBlockchainTransaction"
        - type: object
          properties:
            actualFees:
              $ref: "#/components/schemas/RampFees"

    OffRampReceipt:
      allOf:
        - $ref: "#/components/schemas/RampFiatTransfer"
        - type: object
          properties:
            actualFees:
              $ref: "#/components/schemas/RampFees"

    BridgeReceipt:
      allOf:
        - $ref: "#/x-schemas/PublicBlockchainTransaction"
        - type: object
          properties:
            actualFees:
              $ref: "#/components/schemas/RampFees"

    OnRamp:
      title: On Ramp
      allOf:
        - $ref: "#/components/schemas/CommonRamp"
        - oneOf:
            - $ref: "#/components/schemas/OnRampPropertiesWithPaymentInstructions"
            - $ref: "#/components/schemas/PrefundedOnRampProperties"
        - type: object
          properties:
            receipt:
              $ref: "#/components/schemas/OnRampReceipt"

    OffRamp:
      allOf:
        - $ref: "#/components/schemas/CommonRamp"
        - oneOf:
            - $ref: "#/components/schemas/OffRampPropertiesWithPaymentInstructions"
            - $ref: "#/components/schemas/PrefundedOffRampProperties"
        - type: object
          properties:
            receipt:
              $ref: "#/components/schemas/OffRampReceipt"

    Bridge:
      allOf:
        - $ref: "#/components/schemas/CommonRamp"
        - oneOf:
            - $ref: "#/components/schemas/BridgePropertiesWithPaymentInstructions"
            - $ref: "#/components/schemas/PrefundedBridgeProperties"
        - type: object
          properties:
            receipt:
              $ref: "#/components/schemas/BridgeReceipt"

    Ramp:
      oneOf:
        - $ref: "#/components/schemas/OnRamp"
        - $ref: "#/components/schemas/OffRamp"
        - $ref: "#/components/schemas/Bridge"

    RampFiatTransfer:
      oneOf:
        - $ref: "#/x-schemas/IbanTransfer"
        - $ref: "#/x-schemas/AchTransfer"
        - $ref: "#/x-schemas/WireTransfer"
        - $ref: "#/x-schemas/SpeiTransfer"
        - $ref: "#/x-schemas/PixTransfer"
        - $ref: "#/x-schemas/EuropeanSEPATransfer"
        - $ref: "#/x-schemas/LocalBankTransfer"
        - $ref: "#/x-schemas/MobileMoneyTransfer"

    OrderQuote:
      type: object
      required:
        - type
        - quoteId
      properties:
        type:
          type: string
          enum:
            - Quote
        quoteId:
          type: string
        reQuote:
          oneOf:
            - $ref: "#/components/schemas/Retry"
            - $ref: "#/components/schemas/Market"

    SigningMessage:
      oneOf:
        - $ref: "#/components/schemas/EVM_EIP712SigningMessage"
        - $ref: "#/components/schemas/SolanaSigningMessage"
      discriminator:
        propertyName: type

    EVM_EIP712SigningMessage:
      type: object
      required: [type, message]
      properties:
        type:
          type: string
          enum: [EVM_EIP712]
        message:
          $ref: "#/components/schemas/EIP712Message"
      example:
        type: "EVM_EIP712"
        message:
          types:
            EIP712Domain:
              - name: name
                type: string
              - name: version
                type: string
              - name: chainId
                type: uint256
              - name: verifyingContract
                type: address
            Permit:
              - name: owner
                type: address
              - name: spender
                type: address
              - name: value
                type: uint256
              - name: nonce
                type: uint256
              - name: deadline
                type: uint256
          primaryType: "Permit"
          domain:
            name: "USD Coin"
            version: "2"
            chainId: 1
            verifyingContract: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
          message:
            owner: "0x1234567890abcdef1234567890abcdef12345678"
            spender: "0xabcdef1234567890abcdef1234567890abcdef12"
            value: "1000000"
            nonce: 0
            deadline: 1736035200

    SolanaSigningMessage:
      type: object
      required: [type, transaction]
      properties:
        type:
          type: string
          enum: [SOLANA_TRANSACTION]
        transaction:
          type: string
          description: Base64 encoded serialized Solana VersionedTransaction.
      example:
        type: "SOLANA_TRANSACTION"
        transaction: "AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="

    EIP712Message:
      type: object
      description: EIP-712 message to be signed.
      required: [types, primaryType, domain, message]
      properties:
        types:
          type: object
          description: Type definitions for the message.
        primaryType:
          type: string
          description: The primary type of the message.
        domain:
          type: object
          description: The domain separator.
        message:
          type: object
          description: The message content.

    SubmitSignedRampPaymentPermitRequest:
      type: object
      required: [signedTransaction]
      properties:
        signedTransaction:
          type: string
          description: The signed transaction string to be broadcasted.
      example:
        signedTransaction: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1b"

    RampRequirements:
      type: object
      required: [piiEncryption]
      properties:
        piiEncryption:
          $ref: "#/components/schemas/PIIEncryptionRequirement"
      example:
        piiEncryption:
          certificate: "-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"
          keyId: "key-123"
          requiredPIIFields:
            - "originator.fullName"
            - "beneficiary.postalAddress"
          supportedJWEAlgorithms:
            - "RSA-OAEP-256"
          supportedJWEEncryptions:
            - "A128GCM"

    RampRequestForInformation:
      allOf:
        - type: object
          required: [rampId]
          properties:
            rampId:
              type: string
        - $ref: "#/components/schemas/PIIEncryptionRequirement"

    PIIEncryptionRequirement:
      type: object
      required:
        - certificate
        - keyId
        - requiredPIIFields
        - supportedJWEAlgorithms
        - supportedJWEEncryptions
      properties:
        certificate:
          type: string
          description: PEM encoded certificate (public key) for JWE encryption.
        keyId:
          type: string
          description: Identifier for the public key.
        requiredPIIFields:
          type: array
          items:
            type: string
          description: >
            List of PII fields that must be included in the encrypted payload
            (e.g., "originator.fullName", "beneficiary.postalAddress").
        supportedJWEAlgorithms:
          type: array
          items:
            type: string
          description: List of supported JWE algorithms (e.g., RSA-OAEP-256).
        supportedJWEEncryptions:
          type: array
          items:
            type: string
          description: List of supported JWE encryption methods (e.g., A128GCM).

    Retry:
      type: object
      required:
        - type
        - slippage
      properties:
        type:
          type: string
          enum:
            - Retry
        slippage:
          type: number
          description: Slippage tolerance in basis points (bps) for quote orders - 1 is 0.01% and 10000 is 100%
        count:
          type: number
          description: If quote is expired, how many times to re-generate new quotes to try having the order executed as in the original quote.

    Market:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            - Market

    Subscription:
      type: object
      required:
        - id
        - subscriberUrl
        - subscriptionPath
      properties:
        id: { type: string, format: uuid, readOnly: true }
        subscriberUrl:
          description: URL that will be notified when the target event occurs.
          type: string
          format: uri
        subscriptionPath:
          description: Path on which the subscription was registered.
          type: string
          readOnly: true
          example: /withdrawals/subscriptions/finalized
